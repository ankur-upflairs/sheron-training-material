<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form id="form">
        <input name="title" id="title" type="text">
        <input name="body" id="body" type="text">
        <input type="submit">
    </form>
    <div class="box"></div>
    <script>
        //fetch is used to send request to an API from javascript(browser)
        //request => url(endpoint) , method , headers 
        // methods => get (get data from server) ,post (send data to server) , put / patch (update data on server) , delete (delete data on server)
        let box = document.querySelector('.box')
        async function getData() {
            let res = await fetch('https://dummyjson.com/posts',{
                method:'GET'
            })
            let data = await res.json()
            console.log(data)
            let posts = data.posts
            for(let post of posts){
                let box1 = document.createElement('div')
                box1.innerHTML = `${post.id}. ${post.title} <br>
                ${post.body}<hr>`
                box.append(box1)
            }

        }
        getData()
        let form = document.getElementById('form')
        form.addEventListener('submit',sendData)
        async function sendData( event ) {
            event.preventDefault() 
            let titleField = document.getElementById('title')
            let bodyField = document.getElementById('body') 
            let title = titleField.value 
            let body = bodyField.value 
            let formData = {
                title:title,
                body:body ,
                userId:123
            }
            //JSON.parse => json to object 
            //JSON.stringify=> object to json
            // console.log(event)
            // console.log(title,body)
            let res = await fetch('https://dummyjson.com/posts/add',{
                method:'POST',
                headers:{
                    'content-type':'application/json'
                },
                body:JSON.stringify(formData)
            })
            let data = await res.json()
            console.log(data)
            titleField.value = ''
            bodyField.value = ''
        }


    </script>
</body>
</html>